{"changed":true,"filter":false,"title":"name_scraper.py","tooltip":"/name_scraper.py","value":"import requests\nimport time\nfrom BeautifulSoup import BeautifulSoup\nimport re\nfrom time import sleep\n\ndef crawl(url):\n\twhile True:\n\t\ttry:\n\t\t\tprint \"trying to get URL... \",\n\t\t\tr=requests.get(url)\n\t\t\tprint \"Got URL!\"\n\t\t\treturn r.content\n\t\texcept Exception as e:\n\t\t\tprint e\n\t\t\tsleep(2)\n\t\t\tprint \"Retrying!!\"\n\npid=1\nplayer_list=[]\ni=1\nurl_list=[\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/814789.html\",\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/819741.html\",\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/816431.html\",\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/812413.html\",\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/817409.html\",\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/816765.html\",\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/818117.html\",\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/817901.html\",\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/818887.html\",\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/817889.html\",\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/817899.html\",\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/819825.html\",\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/819743.html\",\"http://www.espncricinfo.com/icc-cricket-world-cup-2015/content/squad/817903.html\"]\nfor url in url_list:\n\thtml = crawl(url)\n\tprint \"Page crawled.\"\n\tparsed_html = BeautifulSoup(html)\n\tnames=parsed_html.findAll(\"h3\",{ \"class\" : None })\n\tprint names\n\tfor name in names:\n\t\tprint pid,\n\t\tfile=open(\"player1.csv\",\"a\")\n\t\tfile.write(str(pid))\n\t\tfile.write(\",\")\n\t\tpid+=1\n\t\tnametext=name.find('a').text\n\t\tlst=nametext.split(' ')\n\t\tprint lst\n\t\tfile.write(str(str(lst[0])+\",\"))\n\t\tif(1<len(lst)):\n\t\t\tfile.write(str(lst[1]))\n\t\tfile.write(str(\",\"+str(i)))\n\t\tfile.write(\"\\n\")\n\t\tfile.close()\n\ti+=1","undoManager":{"mark":6,"position":-1,"stack":[[{"group":"doc","deltas":[{"start":{"row":40,"column":27},"end":{"row":40,"column":28},"action":"insert","lines":["+"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":27},"end":{"row":40,"column":28},"action":"remove","lines":["+"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":27},"end":{"row":40,"column":28},"action":"insert","lines":["+"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":28},"end":{"row":40,"column":29},"action":"insert","lines":["\""]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":29},"end":{"row":40,"column":30},"action":"insert","lines":["\\"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":30},"end":{"row":40,"column":31},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":31},"end":{"row":40,"column":32},"action":"insert","lines":["\""]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":16},"end":{"row":41,"column":17},"action":"insert","lines":["\\"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":17},"end":{"row":41,"column":18},"action":"insert","lines":["n"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":29,"column":12},"end":{"row":29,"column":12},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1423662991486}